components:
  schemas:
    TelegramServiceSebBody:
      type: object
      properties:
        redeem_code:
          type: string
          description: The redeem code for the service
          example: "REDEEM123"
        file_name:
          type: string
          description: The name of the file to be uploaded
          example: "Quiz Jarkom"
        file:
          type: string
          format: binary
          description: The file to be uploaded
          example: "base64-encoded-file-content"
    TelegramServiceSebInvalidRouteResponse:
      type: object
      properties:
        code:
          type: integer
          description: The HTTP status code
          example: 422
        status:
          type: string
          description: The status of the response
          example: "error"
        message:
          type: string
          description: The error message
          example: "Please provide a redeem code (e.g. /bypass/123) and a SEB file to perform the bypass"
        data:
          type: array
    TelegramServiceSebPostResponse:
      type: object
      properties:
        code:
          type: integer
          description: The HTTP status code
          example: 200
        status:
          type: string
          description: The status of the response
          example: "success"
        message:
          type: string
          description: The message of the response
          example: "SEB configuration file successfully bypasse"
        data:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: The name of the file
                example: "Referer"
              value:
                type: string
                description: The value of the file
                example: "https://example.com/referer"
      example:
        code: 200
        status: success
        message: SEB configuration file successfully bypassed
        data:
          - name: Referer
            value: https://example.com/referer
          - name: User-Agent
            value: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3
          - name: X-SafeExamBrowser-RequestHash
            value: 1234567890abcdef
          - name: X-SafeExamBrowser-ConfigHash
            value: 1234567890abcdef
          - name: File-Name
            value: Quiz Jarkom
    TelegramServiceSebInvalidRedeemCodeResponse:
      type: object
      properties:
        code:
          type: integer
          description: The HTTP status code
          example: 400
        status:
          type: string
          description: The status of the response
          example: "error"
        message:
          type: string
          description: The error message
          example: "Invalid redeem code"
        data:
          type: array

/telegram/service/seb:
  post:
    summary: The telegram service seb api route
    description: This is the telegram service seb api route to bypass the SEB configuration file
    operationId: postTelegramServiceSebInvalidRoute
    tags:
      - Telegram
    responses:
      "404":
        description: Route not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MissingRouteResponse'
      "422":
        description: Invalid request body
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TelegramServiceSebInvalidRouteResponse'
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'

/telegram/service/seb/{redeemCode}:
  post:
    summary: The telegram service seb api route
    description: This is the telegram service seb api route to bypass the SEB configuration file
    operationId: postTelegramServiceSeb
    tags:
      - Telegram
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TelegramServiceSebBody'
    parameters:
      - name: redeemCode
        in: path
        required: true
        description: The redeem code for the service
        schema:
          type: string
          example: "REDEEM123"
    responses:
      "200":
        description:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TelegramServiceSebPostResponse'
      "400":
        description: Bad request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TelegramServiceSebInvalidRedeemCodeResponse'
      "404":
        description: Route not found
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MissingRouteResponse'
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
